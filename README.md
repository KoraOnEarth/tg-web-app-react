# Курсовая работа: Часть 1 (Front-End)

## Цель работы

Разработать телеграмм-магазин и бота к нему, в котором можно будет покупать различные предметы.

## Telegram-Bot

https://t.me/KoraSHOP_bot

## Общий стек технологий:

1. ReactJS (v18.0.2)
2. NodeJS (v16.15.1)
3. Хостинги: Netlify (Front-end), Selectel (Back-End)

## Дополнительные библиотеки

1. Node-telegram-bot-api (v0.61.0)
2. Nodemon (v2.0.20)
3. Cores (v2.8.5)
4. Express (v4.18.2)

# Здесь будет Front-End часть

## ReactJS
На React реализован сам магазин, который открывается нам в виде небольшого окна в телеграмм-боте.

У нас есть два основных файла - `./public/index.html` и `./src/index.js`

### `index.html`
В первом файле у нас хранится базовая разметка нашего сайта. 
Больше всего нас интересует тег `div id="root"`, в котором, по сути, находится ВСЕ наше web-приложение. И все отображение нашего сайта хранится как раз в этом `div`.

### `index.js`
Во втором файле - `index.js` у нас находится базовая структура React. 
В первых нескольких строках идут импорты самого React (`import React from 'react'`), ReactDOM (`import ReactDOM from 'react-dom/client'`) - для работы с "виртуальным" DOM, и BrowserRouter.

Также создается переменная root - это та переменная, которая будет передана в index.html, которая и составляет все наше приложение, а также функция render().

### `App.js` и `App.css`

В `index.js` передается App - компонент, который отвечает за Все наше приложение, в котором хранятся все необходимые данные, логика, отображение и внешний вид. 

Помимо необходимых импортов React'a и react-router-dom, а также нескольких функций оттуда, у нас там есть, например, импорт `import {useTelegram} from "./hooks/useTelegram"`. Он нам необходим для удобной работы с библиотекой телеграмма, о которой подробнее речь пойдет ниже. 

Ну а в `App.css` хранятся стили для `App.js`

### `useTelegram.js`

Данный файл находится по адресу `./src/hooks/useTelegram.js`.
Это хук, который я использовал для того, чтобы удобно работать с библиотекой от Telegram. Там находится константа `tg`, в которой находится обращение к самому API Телеграмма, а также несколько функций - `onClose()`, `onToggleButton()` и return, в котором я отдавал эти функции, чтобы ими можно было воспользоваться в других файлах проекта, переменную `tg`, чтобы впоследствии не нужно было писать полностью `window.Telegram.WebApp`, а также сокращения для других переменных - `user` вместо `tg.initDataUnsafe?.user` и `queryId` вместо `tg.initDataUnsafe?.query_id`. 



## Компоненты

Компоненты находятся в папке `components`, которая находится по адресу `./src/compontnts`. В ней можно увидеть ещё несколько папок - `Header`, `Form`, `Button`, `ProductItem`, `ProductList`.

### `Header`

Это компонент, который отвечает за отрисовку "шапки" нашего сайта. 
В папке находятся 2 файла: `Header.jsx`, в котором находится логика компонента, и `Header.css`, в котором прописаны стили для этого компонента.

На первых нескольких строках файла `Header.jsx` находятся импорты, которые нам необходимы - это импорт самого React, стилей для компонента, хук `useTelegram` и `Button` - ещё один компонент, который будет чуть ниже. 

В шапке находится два элемента - кнопка "Закрыть", которая закрывает окошко магазина, а также отображение имени/никнейма, под которым мы подписаны в Телеграмме.

### `Button`

В этом компоненте находится кнопка, которая настроена под React, которая принимает в себя аргументы (props), с которыми может взаимодействовать.

Эта кнопка используется в компоненте `Header` для возможности закрыть мини-приложение.

### `ProductList`

Открывая магазин, видя список товаров, мы, по сути, видим ProductList. В нем находится список все товаров, которые находятся в продаже. 

В переменной `products` находится список товаров, которые продаются на данный момент.

Функция `getTotalPrice` подсчитывает стоимость выбранных товаров, и цена выводится в кнопке внизу.

Далее идёт сам компонент `ProductList`. В нем мы подключаем один из встроенных хуков React - `useState`, который является хуком состояния. 

Затем мы импортируем `tg` и `queryId` из нашего собственного хука `useTelegram`.

`onSendData` - функция, которая нужна для того, чтобы отправить информацию на сервер о том, что было выбрано пользователем для дальнейшей работы.

`onAdd` - функция, которая срабатывает при добавлении предмета в корзину.


### `ProductItem`

Этот компонент отвечает за конкретный продаваемый предмет.
В нем выводится фотография товара, его название, описание и цена. А также добавлена кнопка "Добавить в корзину".


### `Form`

В диалоге с ботом у нас есть кнопка "Заполнить форму", в которой мы можем отправить информацию о том, куда отправлять наш заказ.

## TOML
### `netlify.toml`

Здесь хранится конфигурация для Netlify, которая позволяет вызову формы корректно отрабатывать.


---